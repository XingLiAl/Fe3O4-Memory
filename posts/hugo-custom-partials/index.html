<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>给 Hugo 博客添加自定义页眉/页脚 | 元素碎语</title><meta name=keywords content="博客,Hugo,Papermod"><meta name=description content="一些废话 最近想给博客添加统计代码, 但我使用的 Papermod 主题并没有除 Google Analysis 外的统计功能的模板, 所以我就尝试在 官方文档的模板介绍页面 中寻找解决方案 首先我看"><meta name=author content="Fe3O4"><link rel=canonical href=Fe3O4-Memory/posts/hugo-custom-partials/><link crossorigin=anonymous href=/Fe3O4-Memory/assets/css/stylesheet.bc1149f4a72aa4858d3a9f71462f75e5884ffe8073ea9d6d5761d5663d651e20.css integrity="sha256-vBFJ9KcqpIWNOp9xRi915YhP/oBz6p1tV2HVZj1lHiA=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/Fe3O4-Memory/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=Fe3O4-Memory/favicon.ico><link rel=icon type=image/png sizes=16x16 href=Fe3O4-Memory/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=Fe3O4-Memory/favicon-32x32.png><link rel=apple-touch-icon href=Fe3O4-Memory/apple-touch-icon.png><link rel=mask-icon href=Fe3O4-Memory/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="给 Hugo 博客添加自定义页眉/页脚"><meta property="og:description" content="一些废话 最近想给博客添加统计代码, 但我使用的 Papermod 主题并没有除 Google Analysis 外的统计功能的模板, 所以我就尝试在 官方文档的模板介绍页面 中寻找解决方案 首先我看"><meta property="og:type" content="article"><meta property="og:url" content="Fe3O4-Memory/posts/hugo-custom-partials/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-02-01T17:35:20+08:00"><meta property="article:modified_time" content="2022-02-01T17:35:20+08:00"><meta property="og:site_name" content="元素碎语"><meta name=twitter:card content="summary"><meta name=twitter:title content="给 Hugo 博客添加自定义页眉/页脚"><meta name=twitter:description content="一些废话 最近想给博客添加统计代码, 但我使用的 Papermod 主题并没有除 Google Analysis 外的统计功能的模板, 所以我就尝试在 官方文档的模板介绍页面 中寻找解决方案 首先我看"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"Fe3O4-Memory/posts/"},{"@type":"ListItem","position":3,"name":"给 Hugo 博客添加自定义页眉/页脚","item":"Fe3O4-Memory/posts/hugo-custom-partials/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"给 Hugo 博客添加自定义页眉/页脚","name":"给 Hugo 博客添加自定义页眉\/页脚","description":"一些废话 最近想给博客添加统计代码, 但我使用的 Papermod 主题并没有除 Google Analysis 外的统计功能的模板, 所以我就尝试在 官方文档的模板介绍页面 中寻找解决方案 首先我看","keywords":["博客","Hugo","Papermod"],"articleBody":"一些废话 最近想给博客添加统计代码, 但我使用的 Papermod 主题并没有除 Google Analysis 外的统计功能的模板, 所以我就尝试在 官方文档的模板介绍页面 中寻找解决方案\n首先我看到了 这个 The template function was used to include partial templates in much older Hugo versions. Now it’s useful only for calling internal templates. The syntax is {{ template “_internal/.” . }}.\n以及 这个 DEPRECATED - Alternative Templating Languages\nDEPRECATED - Support for Ace \u0026 Amber templating has been removed in version 0.62 Support for Amber and Ace templates has been removed since Hugo 0.62 per issue #6609.\n意思是大概就是说, 自定义模板功能在某个版本被移除了\n瞬间感觉没有希望了.png\n但我又想, 以我的能力水平, 并不能编写一个 “二次生成器”, 或者叫 “修饰器”(?) 来对整个博客的页面加上一段东西 (没错, 能力限制了我的想象, 我菜)\n然后我就继续在刚才的那个页面上找, 结果, 我发现了 partials (中文应该是叫 “部分” 吧(说话能力严重退化的我…))\n使用 Partials 按照 官方文档对 Partials 的介绍 :\nThe partial function is used to include partial templates using the syntax {{ partial “/.” . }}.\n简单来说, partials 是一种 碎片化的 (废话), 可被引用的 (还是废话) 的 “模板”, 而且这种 “模板” 没有被弃用, 也就是说, 我们还是可以对它进行自定义的 (希望又回来了有木有)\n要使用 partials, 你需要先找到你的博客源码目录中的 layouts 文件夹中的 partials 文件夹 (没有的话要新建 (注意大小写哦)), 然后你就可以在里面编写你自己的 “碎片模板了”\n例如, 我可以在里面创建一个 51la文件夹 (对的, 子目录也支持), 然后往里面放入一个 stats.html, 里面的内容就是你想要加入的内容, 可以是脚本, 标题, 文字等, 但要注意的是这是整个 html 页面的一个碎片, 所以不能加入 , , 这些\n创建完碎片后, 怎么引用呢? 举我现在用的 Papermod 主题为例 (其他主题我还未验证), 我们可以在刚才的 partials 文件夹下创建 extend_head.html 和 extend_footer.html, 这两个文件分别对应页眉和页脚 (应该…是这么叫的吧怎么感觉一股 word 风 (明明就是)), 里面的内容格式和刚才的其它碎片一样. 如果想要引用其他碎片, 可以使用:\n{{ partial \"碎片相对路径\" . }}\n例如: 我想要在页眉添加刚才的 “51la 统计” 碎片, 就可以在 extend_head.html 中写入以下内容:\n{{ if hugo.IsProduction }} {{ partial \"51la/stat.html\" . }} {{ end }} 这里的判断语句指的是只在生产环境 (也就是在 public 目录生成页面时) 才向页面中加入中间的代码, 变量和判断语句我有时间再讲 (咕咕咕), 你也可以直接查看 官方文档 还要注意这里的点千万不要忘了, 不然的话不能正确加载, 官方文档 中刻意强调了这一点:\nOne of the most common mistakes with new Hugo users is failing to pass a context to the partial call. In the pattern above, note how “the dot” (.) is required as the second argument to give the partial context. You can read more about “the dot” in the Hugo templating introduction.\n其实这里还有更高级的用法, 但是我也没玩懂, 所以就不写了 (逃, 如果感兴趣的话可以去阅读文档(小声)\n","wordCount":"1101","inLanguage":"zh","datePublished":"2022-02-01T17:35:20+08:00","dateModified":"2022-02-01T17:35:20+08:00","author":{"@type":"Person","name":"Fe3O4"},"mainEntityOfPage":{"@type":"WebPage","@id":"Fe3O4-Memory/posts/hugo-custom-partials/"},"publisher":{"@type":"Organization","name":"元素碎语","logo":{"@type":"ImageObject","url":"Fe3O4-Memory/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=Fe3O4-Memory accesskey=h title="元素碎语 (Alt + H)">元素碎语</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=Fe3O4-Memory/Fe3O4-Memory/categories title=分类><span>分类</span></a></li><li><a href=Fe3O4-Memory/Fe3O4-Memory/tags title=标签><span>标签</span></a></li><li><a href=Fe3O4-Memory/Fe3O4-Memory/archives title=归档><span>归档</span></a></li><li><a href=Fe3O4-Memory/Fe3O4-Memory/friends title=友链><span>友链</span></a></li><li><a href=Fe3O4-Memory/Fe3O4-Memory/about title=关于><span>关于</span></a></li><li><a href=Fe3O4-Memory/Fe3O4-Memory/search title="搜索 (Alt + /)" accesskey=/><span>搜索</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>给 Hugo 博客添加自定义页眉/页脚</h1><div class=post-meta><span title='2022-02-01 17:35:20 +0800 +0800'>二月 1, 2022</span>&nbsp;·&nbsp;3 分钟&nbsp;·&nbsp;1101 字&nbsp;·&nbsp;Fe3O4&nbsp;|&nbsp;<a href=https://github.com/Fe3O4-Git/Fe3O4-Git.github.io.source/tree/master/content/posts/hugo-custom-partials.md rel="noopener noreferrer" target=_blank>提供修改建议</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>目录</span></summary><div class=inner><ul><li><a href=#%e4%b8%80%e4%ba%9b%e5%ba%9f%e8%af%9d aria-label=一些废话>一些废话</a></li><li><a href=#%e4%bd%bf%e7%94%a8-partials aria-label="使用 Partials">使用 Partials</a></li></ul></div></details></div><div class=post-content><h2 id=一些废话>一些废话<a hidden class=anchor aria-hidden=true href=#一些废话>#</a></h2><p>最近想给博客添加统计代码, 但我使用的 Papermod 主题并没有除 Google Analysis 外的统计功能的模板, 所以我就尝试在 <a href=https://gohugo.io/templates/introduction/ target=_blank>官方文档的模板介绍页面</a>
中寻找解决方案</p><p>首先我看到了 <a href=https://gohugo.io/templates/introduction/#template target=_blank>这个</a></p><blockquote><p>The template function was used to include partial templates in much older Hugo versions. <strong>Now it’s useful only for calling internal templates.</strong> The syntax is {{ template &ldquo;_internal/&lt;TEMPLATE>.&lt;EXTENSION>&rdquo; . }}.</p></blockquote><p>以及 <a href=https://gohugo.io/templates/alternatives/ target=_blank>这个</a></p><blockquote><p><strong>DEPRECATED</strong> - Alternative Templating Languages</p><p><strong>DEPRECATED</strong> - Support for Ace & Amber templating has been <strong>removed</strong> in version 0.62
Support for Amber and Ace templates has been <strong>removed</strong> since Hugo 0.62 per issue #6609.</p></blockquote><p>意思是大概就是说, 自定义模板功能在某个版本被移除了</p><p>瞬间感觉没有希望了.png</p><p>但我又想, 以我的能力水平, 并不能编写一个 &ldquo;二次生成器&rdquo;, 或者叫 &ldquo;修饰器&rdquo;(?) 来对整个博客的页面加上一段东西 (没错, 能力限制了我的想象, 我菜)</p><p>然后我就继续在刚才的那个页面上找, 结果, 我发现了 partials (中文应该是叫 &ldquo;部分&rdquo; 吧(说话能力严重退化的我&mldr;))</p><h2 id=使用-partials>使用 Partials<a hidden class=anchor aria-hidden=true href=#使用-partials>#</a></h2><p>按照 <a href=https://gohugo.io/templates/introduction/#partial target=_blank>官方文档对 Partials 的介绍</a>
:</p><blockquote><p>The partial function is used to <strong>include partial templates</strong> using the syntax {{ partial &ldquo;&lt;PATH>/&lt;PARTIAL>.&lt;EXTENSION>&rdquo; . }}.</p></blockquote><p>简单来说, partials 是一种 碎片化的 (废话), 可被引用的 (还是废话) 的 &ldquo;模板&rdquo;, 而且这种 &ldquo;模板&rdquo; 没有被弃用, 也就是说, 我们还是可以对它进行自定义的 (希望又回来了有木有)</p><p>要使用 partials, 你需要先找到你的博客源码目录中的 layouts 文件夹中的 partials 文件夹 (没有的话要新建 (注意大小写哦)), 然后你就可以在里面编写你自己的 &ldquo;碎片模板了&rdquo;</p><p>例如, 我可以在里面创建一个 51la文件夹 (对的, 子目录也支持), 然后往里面放入一个 stats.html, 里面的内容就是你想要加入的内容, 可以是脚本, 标题, 文字等, 但要注意的是这是整个 html 页面的一个碎片, 所以不能加入 &lt;html>, &lt;head>, &lt;body> 这些</p><p>创建完碎片后, 怎么引用呢? 举我现在用的 Papermod 主题为例 (其他主题我还未验证), 我们可以在刚才的 partials 文件夹下创建 extend_head.html 和 extend_footer.html, 这两个文件分别对应页眉和页脚 (应该&mldr;是这么叫的吧怎么感觉一股 word 风 (明明就是)), 里面的内容格式和刚才的其它碎片一样. 如果想要引用其他碎片, 可以使用:</p><p><code>{{ partial "碎片相对路径" . }}</code></p><p>例如: 我想要在页眉添加刚才的 &ldquo;51la 统计&rdquo; 碎片, 就可以在 extend_head.html 中写入以下内容:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>{{ if hugo.IsProduction }}
</span></span><span style=display:flex><span>    {{ partial &#34;51la/stat.html&#34; . }}
</span></span><span style=display:flex><span>{{ end }}
</span></span></code></pre></div><p>这里的判断语句指的是只在生产环境 (也就是在 public 目录生成页面时) 才向页面中加入中间的代码, 变量和判断语句我有时间再讲 (咕咕咕), 你也可以直接查看 <a href=https://gohugo.io/templates/introduction/ target=_blank>官方文档</a></p><p>还要注意这里的点千万不要忘了, 不然的话不能正确加载, <a href=https://gohugo.io/templates/partials/#use-partials-in-your-templates target=_blank>官方文档</a>
中刻意强调了这一点:</p><blockquote><p>One of the most common mistakes with new Hugo users is failing to pass a context to the partial call. In the pattern above, note <strong>how “the dot” (.) is required</strong> as the second argument to give the partial context. You can read more about “the dot” in the Hugo templating introduction.</p></blockquote><p>其实这里还有更高级的用法, 但是我也没玩懂, 所以就不写了 (逃, 如果感兴趣的话可以去阅读文档(小声)</p></div><footer class=post-footer><ul class=post-tags><li><a href=Fe3O4-Memory/tags/%E5%8D%9A%E5%AE%A2/>博客</a></li><li><a href=Fe3O4-Memory/tags/hugo/>Hugo</a></li><li><a href=Fe3O4-Memory/tags/papermod/>Papermod</a></li></ul></footer><script src=https://utteranc.es/client.js repo=Fe3O4-Git/Fe3O4-Git.github.io issue-term=title label=comment theme=preferred-color-scheme crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2023 <a href=Fe3O4-Memory>元素碎语</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><p align=center><font size=2 color=gray>本站已在风雨中走过
<span id=span_life_time></font></p><script>function show_life_time(){var e=new Date("2022/01/28"),t=new Date,n=t.getTime()-e.getTime(),s=Math.floor(n/864e5);span_life_time.innerHTML=s+" 天"}show_life_time()</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="复制";function s(){t.innerHTML="已复制！",setTimeout(()=>{t.innerHTML="复制"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>