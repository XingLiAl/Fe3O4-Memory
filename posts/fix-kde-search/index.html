<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>解决 KDE 搜索功能 (Baloo) 无法使用的问题 | 元素碎语</title><meta name=keywords content="Linux,KDE"><meta name=description content="前倾概要 (其实就是废话(划掉)) 最近发现我的 KDE 无法搜索文件了, 无论在 Dolphin 下搜索什么得到的结果都是空, 但 find 指令却可以找到文件, 因为不常用搜索, 所"><meta name=author content="Fe3O4"><link rel=canonical href=Fe3O4-Memory/posts/fix-kde-search/><link crossorigin=anonymous href=/Fe3O4-Memory/assets/css/stylesheet.bc1149f4a72aa4858d3a9f71462f75e5884ffe8073ea9d6d5761d5663d651e20.css integrity="sha256-vBFJ9KcqpIWNOp9xRi915YhP/oBz6p1tV2HVZj1lHiA=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/Fe3O4-Memory/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=Fe3O4-Memory/favicon.ico><link rel=icon type=image/png sizes=16x16 href=Fe3O4-Memory/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=Fe3O4-Memory/favicon-32x32.png><link rel=apple-touch-icon href=Fe3O4-Memory/apple-touch-icon.png><link rel=mask-icon href=Fe3O4-Memory/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="解决 KDE 搜索功能 (Baloo) 无法使用的问题"><meta property="og:description" content="前倾概要 (其实就是废话(划掉)) 最近发现我的 KDE 无法搜索文件了, 无论在 Dolphin 下搜索什么得到的结果都是空, 但 find 指令却可以找到文件, 因为不常用搜索, 所"><meta property="og:type" content="article"><meta property="og:url" content="Fe3O4-Memory/posts/fix-kde-search/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-02-06T17:41:18+08:00"><meta property="article:modified_time" content="2022-02-06T17:41:18+08:00"><meta property="og:site_name" content="元素碎语"><meta name=twitter:card content="summary"><meta name=twitter:title content="解决 KDE 搜索功能 (Baloo) 无法使用的问题"><meta name=twitter:description content="前倾概要 (其实就是废话(划掉)) 最近发现我的 KDE 无法搜索文件了, 无论在 Dolphin 下搜索什么得到的结果都是空, 但 find 指令却可以找到文件, 因为不常用搜索, 所"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"Fe3O4-Memory/posts/"},{"@type":"ListItem","position":3,"name":"解决 KDE 搜索功能 (Baloo) 无法使用的问题","item":"Fe3O4-Memory/posts/fix-kde-search/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"解决 KDE 搜索功能 (Baloo) 无法使用的问题","name":"解决 KDE 搜索功能 (Baloo) 无法使用的问题","description":"前倾概要 (其实就是废话(划掉)) 最近发现我的 KDE 无法搜索文件了, 无论在 Dolphin 下搜索什么得到的结果都是空, 但 find 指令却可以找到文件, 因为不常用搜索, 所","keywords":["Linux","KDE"],"articleBody":"前倾概要 (其实就是废话(划掉)) 最近发现我的 KDE 无法搜索文件了, 无论在 Dolphin 下搜索什么得到的结果都是空, 但 find 指令却可以找到文件, 因为不常用搜索, 所以也没有怎么在意\n之后的几天我又用到了搜索功能, KDE 依然无法搜索到文件, 不过这次我想到了之前在 archlinuxcn群 中看到的大佬们的一段对话, 大概就是说 KDE 的搜索功能靠的是一个叫 Baloo 组件, 于是我就在 archwiki 上搜索 baloo, 但由于没有看到我遇到的错误, 于是也放弃了\n然后就到了今天, 我再次用到了搜索功能, 这次我再次找到 Troubleshooting 部分, 找到一个 比较相似的错误的修复方式 , 就是这个:\nPlasma Vault Files are indexed and available even when vault is closed This is a major security bug not yet fixed. Any file inside vault is by default indexed and available through file manager search, Krunner and Kickoff.\nOne workaround is to stop folder(s) from being indexed by Baloo. The relevant options are available in System Settings \u003e Search \u003e File Search \u003e Folder specific configuration \u003e Add folder configuration \u003e Stop indexing a folder. After adding the desired folder, the existing Baloo data needs to be removed and freshly indexed again:\n$ balooctl purge $ balooctl disable $ balooctl enable $ balooctl check 大概意思就是, 删掉索引库, 停止索引, 在开启吧. 我抱着不可能相信的心理试了一下, 但这真的解决了我的问题 , 原来 Linux 这边也开始流行重启解决问题了吗?\n解决方法 如上, 我们只需要依次执行以下指令即可 (不需要 sudo 哦):\n$ balooctl suspend # 暂停文件索引 (其实是可选的, 但还是觉得执行了更保险一点(胡思乱想)) $ balooctl disable # 禁用文件索引 $ balooctl purge # 扔掉文件索引数据库 $ balooctl enable # 启用文件搜索 $ balooctl check # 开始索引文件 其实好像在 系统设置 -\u003e 文件和搜索 中好像也能完成, 但我没有测试:\n取消 启用索引 的勾, 点击 应用, 这是会弹出一个警告框, 我们选择 删除索引数据, 再勾选 启用索引, 这时它应该就开始建立索引数据了, 在这里能看到进度 (包括上面由命令发起的索引)\n疑问 这里最后一条指令打完后, 终端在输出一行 Started search for unindexed files 后就把控制台释放给了我们, 但我并不知道这个时候关闭终端窗口会不会中断索引, 因为一直有日志在输出\n","wordCount":"713","inLanguage":"zh","datePublished":"2022-02-06T17:41:18+08:00","dateModified":"2022-02-06T17:41:18+08:00","author":{"@type":"Person","name":"Fe3O4"},"mainEntityOfPage":{"@type":"WebPage","@id":"Fe3O4-Memory/posts/fix-kde-search/"},"publisher":{"@type":"Organization","name":"元素碎语","logo":{"@type":"ImageObject","url":"Fe3O4-Memory/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=Fe3O4-Memory accesskey=h title="元素碎语 (Alt + H)">元素碎语</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=Fe3O4-Memory/Fe3O4-Memory/categories title=分类><span>分类</span></a></li><li><a href=Fe3O4-Memory/Fe3O4-Memory/tags title=标签><span>标签</span></a></li><li><a href=Fe3O4-Memory/Fe3O4-Memory/archives title=归档><span>归档</span></a></li><li><a href=Fe3O4-Memory/Fe3O4-Memory/friends title=友链><span>友链</span></a></li><li><a href=Fe3O4-Memory/Fe3O4-Memory/about title=关于><span>关于</span></a></li><li><a href=Fe3O4-Memory/Fe3O4-Memory/search title="搜索 (Alt + /)" accesskey=/><span>搜索</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>解决 KDE 搜索功能 (Baloo) 无法使用的问题</h1><div class=post-meta><span title='2022-02-06 17:41:18 +0800 +0800'>二月 6, 2022</span>&nbsp;·&nbsp;2 分钟&nbsp;·&nbsp;713 字&nbsp;·&nbsp;Fe3O4&nbsp;|&nbsp;<a href=https://github.com/Fe3O4-Git/Fe3O4-Git.github.io.source/tree/master/content/posts/fix-kde-search.md rel="noopener noreferrer" target=_blank>提供修改建议</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>目录</span></summary><div class=inner><ul><li><a href=#%e5%89%8d%e5%80%be%e6%a6%82%e8%a6%81-%e5%85%b6%e5%ae%9e%e5%b0%b1%e6%98%af%e5%ba%9f%e8%af%9d%e5%88%92%e6%8e%89 aria-label="前倾概要 (其实就是废话(划掉))">前倾概要 (其实就是废话(划掉))</a></li><li><a href=#%e8%a7%a3%e5%86%b3%e6%96%b9%e6%b3%95 aria-label=解决方法>解决方法</a></li><li><a href=#%e7%96%91%e9%97%ae aria-label=疑问>疑问</a></li></ul></div></details></div><div class=post-content><h2 id=前倾概要-其实就是废话划掉>前倾概要 (其实就是废话(划掉))<a hidden class=anchor aria-hidden=true href=#前倾概要-其实就是废话划掉>#</a></h2><p>最近发现我的 KDE 无法搜索文件了, 无论在 Dolphin 下搜索什么得到的结果都是空, 但 find 指令却可以找到文件, 因为不常用搜索, 所以也没有怎么在意</p><p>之后的几天我又用到了搜索功能, KDE 依然无法搜索到文件, 不过这次我想到了之前在 <a href=https://t.me/archlinuxcn_group target=_blank>archlinuxcn群</a>
中看到的大佬们的一段对话, 大概就是说 KDE 的搜索功能靠的是一个叫 Baloo 组件, 于是我就在 archwiki 上搜索 baloo, 但由于没有看到我遇到的错误, 于是也放弃了</p><p>然后就到了今天, 我再次用到了搜索功能, 这次我再次找到 Troubleshooting 部分, 找到一个 <a href=https://wiki.archlinux.org/title/Baloo#Troubleshooting target=_blank>比较相似的错误的修复方式</a>
, 就是这个:</p><blockquote><p>Plasma Vault Files are indexed and available even when vault is closed
This is a major security bug not yet fixed. Any file inside vault is by default indexed and available through file manager search, Krunner and Kickoff.</p><p>One workaround is to stop folder(s) from being indexed by Baloo. The relevant options are available in System Settings > Search > File Search > Folder specific configuration > Add folder configuration > Stop indexing a folder. After adding the desired folder, the existing Baloo data needs to be removed and freshly indexed again:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ balooctl purge
</span></span><span style=display:flex><span>$ balooctl disable
</span></span><span style=display:flex><span>$ balooctl enable
</span></span><span style=display:flex><span>$ balooctl check
</span></span></code></pre></div></blockquote><p>大概意思就是, 删掉索引库, 停止索引, 在开启吧. 我抱着不可能相信的心理试了一下, 但这真的解决了我的问题 <del>, 原来 Linux 这边也开始流行重启解决问题了吗?</del></p><h2 id=解决方法>解决方法<a hidden class=anchor aria-hidden=true href=#解决方法>#</a></h2><p>如上, 我们只需要依次执行以下指令即可 (不需要 sudo 哦):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ balooctl suspend <span style=color:#75715e># 暂停文件索引 (其实是可选的, 但还是觉得执行了更保险一点(胡思乱想))</span>
</span></span><span style=display:flex><span>$ balooctl disable <span style=color:#75715e># 禁用文件索引</span>
</span></span><span style=display:flex><span>$ balooctl purge <span style=color:#75715e># 扔掉文件索引数据库</span>
</span></span><span style=display:flex><span>$ balooctl enable <span style=color:#75715e># 启用文件搜索</span>
</span></span><span style=display:flex><span>$ balooctl check <span style=color:#75715e># 开始索引文件</span>
</span></span></code></pre></div><p>其实好像在 <em>系统设置 -> 文件和搜索</em> 中好像也能完成, 但我没有测试:</p><p>取消 <em>启用索引</em> 的勾, 点击 <em>应用</em>, 这是会弹出一个警告框, 我们选择 <em>删除索引数据</em>, 再勾选 <em>启用索引</em>, 这时它应该就开始建立索引数据了, 在这里能看到进度 (包括上面由命令发起的索引)</p><h2 id=疑问>疑问<a hidden class=anchor aria-hidden=true href=#疑问>#</a></h2><p>这里最后一条指令打完后, 终端在输出一行 <code>Started search for unindexed files</code> 后就把控制台释放给了我们, 但我并不知道这个时候关闭终端窗口会不会中断索引, 因为一直有日志在输出</p></div><footer class=post-footer><ul class=post-tags><li><a href=Fe3O4-Memory/tags/linux/>Linux</a></li><li><a href=Fe3O4-Memory/tags/kde/>KDE</a></li></ul></footer><script src=https://utteranc.es/client.js repo=Fe3O4-Git/Fe3O4-Git.github.io issue-term=title label=comment theme=preferred-color-scheme crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2023 <a href=Fe3O4-Memory>元素碎语</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><p align=center><font size=2 color=gray>本站已在风雨中走过
<span id=span_life_time></font></p><script>function show_life_time(){var e=new Date("2022/01/28"),t=new Date,n=t.getTime()-e.getTime(),s=Math.floor(n/864e5);span_life_time.innerHTML=s+" 天"}show_life_time()</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="复制";function s(){t.innerHTML="已复制！",setTimeout(()=>{t.innerHTML="复制"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>